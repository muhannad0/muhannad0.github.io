<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.69.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=author content="Mohamed Muhannad"><meta name=keywords content="dev,docker,windows"><meta name=description content="Thought to share some of my experience trying to setup a development environment on Windows, running Docker, which is quite enjoyable."><meta property="og:title" content="Notes about a Windows Dev Environment with Docker"><meta property="og:description" content="Thought to share some of my experience trying to setup a development environment on Windows, running Docker, which is quite enjoyable."><meta property="og:type" content="article"><meta property="og:url" content="https://muhannad0.github.io/post/windows-dev-environment-docker/"><meta property="og:image" content="https://muhannad0.github.io/images/avatar.jpg"><meta property="article:published_time" content="2020-05-20T02:48:28+05:00"><meta property="article:modified_time" content="2020-05-20T02:48:28+05:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://muhannad0.github.io/images/avatar.jpg"><meta name=twitter:title content="Notes about a Windows Dev Environment with Docker"><meta name=twitter:description content="Thought to share some of my experience trying to setup a development environment on Windows, running Docker, which is quite enjoyable."><link rel=icon type=image/png href=/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon-16x16.png sizes=16x16><link rel=stylesheet type=text/css media=screen href=https://muhannad0.github.io/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://muhannad0.github.io/css/main.css><link rel=stylesheet type=text/css media=screen href=https://muhannad0.github.io/css/all.css><link rel=stylesheet href=https://muhannad0.github.io/css/katex.min.css crossorigin=anonymous><script defer src=https://muhannad0.github.io/js/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=https://muhannad0.github.io/js/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body);></script><link rel=stylesheet type=text/css media=screen href=https://muhannad0.github.io/css/css/custom.css><title>Notes about a Windows Dev Environment with Docker | Muhannad.0</title></head><body><header><div id=avatar><a href=https://muhannad0.github.io/><img src=/images/avatar.jpg alt=Muhannad.0></a></div><div id=titletext><h2 id=title><a href=https://muhannad0.github.io/>Muhannad.0</a></h2></div><div id=title-description><p id=subtitle>mostly about cloud, automation, IT infra, ops. but wait, there&rsquo;s more&mldr;</p><div id=social><nav><ul><li><a href=https://github.com/muhannad0/><i title=Github class="icons fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/muhannad0/><i title=LinkedIn class="icons fab fa-linkedin"></i></a></li><li><a href=https://twitter.com/monde_><i title=Twitter class="icons fab fa-twitter"></i></a></li></ul></nav></div></div><div id=mainmenu><nav><ul><li><a href=/>Home</a></li><li><a href=/post>All Posts</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags</a></li><li><a href=/categories>Categories</a></li></ul></nav></div></header><main><div class=post><div class=author></div><div class=post-header><div class=meta><div class=date><span class=day>20</span>
<span class=rest>May 2020</span></div></div><div class=matter><h1 class=title>Notes about a Windows Dev Environment with Docker</h1></div></div><div class=markdown><p>Apart from running a couple of scripts on Powershell and a bit of Python code, I haven&rsquo;t gotten that deep into actual coding (creating an application, source control etc.). But little by little, I&rsquo;ve started picking up developing applications using Python, PHP and Javascript.</p><p>In this post, I&rsquo;ll explain the tools I use and some observations made using them.</p><p><strong>TL;DR</strong> You can go to this top notch guide from <a href=https://twitter.com/nickjanetakis>Nick Janetakis</a> to get yours up and running.</p><ul><li><a href=https://nickjanetakis.com/blog/setting-up-docker-for-windows-and-wsl-to-work-flawlessly>Setting Up Docker for Windows and WSL to Work Flawlessly</a></li></ul><h1 id=terminal-and-ide>Terminal and IDE</h1><ul><li><a href=https://ubuntu.com/wsl>WSL Ubuntu</a> (Windows Subsystem Linux - Ubuntu)</li><li><a href=https://code.visualstudio.com/>Visual Studio Code</a></li></ul><p>Even though work required me to use primarily Windows (and Powershell), I&rsquo;ve always found the Linux terminal to be more easy (chaining commands, multiple windows/panes with tmux, vim üòÅ). Now, let&rsquo;s not argue about which is better; I like both Linux terminal and Powershell. But when I started out, it was command-prompt vs. Linux terminal. What can you say? First impressions of Bash were that much better and it kind of carried over till now.</p><p><img src=/images/post-images/dev-env-vscode.png alt="VS Code"></p><h1 id=enter-docker>Enter Docker</h1><p>This setup was all good for a while, until I had to start installing various versions of the runtime binaries. For example some projects needed to run on PHP 5, while newer ones need PHP 7. Python 2.7 is phasing out to Python 3, along with the pip tool and packages. This lead to juggling with various configurations for each type of project. It felt like a cluttered up box of stuff, with so many packages installed and having to deal with the occasional conflict of having multiple versions of the same package.</p><p>I needed a way to isolate each project to it&rsquo;s own environment and runtime binaries etc. This is a problem which <a href=https://www.docker.com/why-docker>Docker</a> has seemed to solved using containers and it&rsquo;s working well for a lot of people.</p><p>Basically a container runs an isolated environment (sort of like a VM, but without the OS overhead) with your choice of OS, packages, configuration and files. To start your project dev environment, just use <code>docker run &lt;arguments></code>. So easy, right?</p><h2 id=running-docker-with-docker-desktop>Running Docker with Docker Desktop</h2><p>As the Docker engine is built on Linux kernel features, it can&rsquo;t run natively on Windows. There are couple of ways to run Docker on Windows but I went with the Docker Desktop route which was very straightforward.</p><ul><li><a href=https://www.docker.com/products/docker-desktop>Docker Desktop</a></li></ul><p>The Docker team has done a great job to simplify the setup and get you started almost immediately.</p><p>FYI, in the new implementation, Docker uses Hyper-V virtualization and runs a small VM with the Docker engine daemon on it.</p><p>Also the use of <code>docker-compose</code> is such a time saver. You can define all the services and configuration that&rsquo;s needed for your application and just have it running with simple <code>docker-compose up</code>. Docker Compose will start up all the necessary containers as defined in your configuration file.</p><h4 id=wsl-tweaks><strong>WSL Tweaks</strong></h4><p>Couple of tweaks were needed to make WSL work with Docker. First is connecting to the Docker daemon running on the VM remotely from WSL. The option needs to be enabled on Docker Desktop settings and specific environment variable set in the terminal.</p><p><img src=/images/post-images/dev-env-docker-desktop-remote-daemon.png alt="Docker Daemon Remote"></p><p>In WSL:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo export DOCKER_HOST<span style=color:#f92672>=</span>tcp://localhost:2375 &gt;&gt; ~/.bashrc

<span style=color:#75715e># Verify that everything works with</span>
docker info
</code></pre></div><h4 id=volume-mounts-from-host-to-container><strong>Volume Mounts from Host to Container</strong></h4><p>Volume mount is the feature where the project folder on your local filesystem (ie: Windows) is enabled to be accessible to the container. With this we edit the code locally on Windows, while making it accessible to the container environment and see the changes we make in realtime. For example, you could have the Python environment already setup in the container and edit the code for a Flask application</p><p>We can just pass the parameter <code>-v &lt;host directory>:&lt;container directory></code> to the docker container run` command, and now the project files are available to the container.</p><p>Couple of things you need to be aware of is how you specify the <code>&lt;host directory></code> in WSL. By default, local files are accessible in <code>/mnt/&lt;drive>/&lt;folder></code>. This needs to be changed so that your drives are referred from <code>/</code> root and that would match to what the Docker daemon sees on the local filesystem. For example this would mean you can use the <code>-v</code> parameter and have the <code>&lt;host directory></code> as <code>/c/project/src</code>, or more easily <code>-v $PWD:&lt;container directory></code>. <code>$PWD</code> is a environment variable that always outputs the current directory you&rsquo;re in.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker container run -d --rm --name app -v $PWD:/app -p 5000:5000 app-image
</code></pre></div><h2 id=conclusion>Conclusion</h2><p>I&rsquo;ve really enjoyed doing development work with this setup. WSL has gotten really good to the point I&rsquo;m using that more, compared to Powershell. I&rsquo;m also learning to improve the workflow using VSCode extensions. Maybe I&rsquo;ll share my experience with those once I get enough time with it.</p><p>Docker has really changed the way I think of setting up environments. Earlier it would be either commands typed out by hand or simple bash scripts. In contrast, having the ability to define your configuration in a file and just run a few commands to get it up and running is remarkable and saves a huge amount of time.</p><p>If there are any other tools I should check out, let me know on <a href=https://twitter.com/monde_>Twitter</a>.</p></div><div class=tags><div class=taxosfloating_left><p>Categories</p></div><div class=termsfloating_right><p><a href=/categories/blog/>blog</a></div><div class=clearit></div><div class=taxosfloating_left><p>Tags</p></div><div class=termsfloating_right><p><a href=/tags/dev/>dev</a>
<a href=/tags/docker/>docker</a>
<a href=/tags/windows/>windows</a></div><div class=clearit></div></div></div></main><footer><a href=https://github.com/dataCobra/hugo-vitae>Vitae</a> theme for <a href=https://gohugo.io>Hugo</a>
<script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-166606040-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></footer></body></html>